filetype: markdown

detect:
    filename: "\\.(qmd|livemd|md|mkd|mkdn|markdown)$"

rules:
    # Tables (Github extension)
    - type: ".*[ :]\\|[ :].*"

      # quotes
    - statement:  "^>.*"

      # Emphasis
    - type: "(^|[[:space:]])(_[^ ][^_]*_|\\*[^ ][^*]*\\*)"

      # Strong emphasis
    - type: "(^|[[:space:]])(__[^ ][^_]*__|\\*\\*[^ ][^*]*\\*\\*)"

      # strike-through
    - type: "(^|[[:space:]])~~[^ ][^~]*~~"

      # horizontal rules
    - special: "^(---+|===+|___+|\\*\\*\\*+)\\s*$"

      # headlines
    - special:  "^#{1,6}.*"

      # lists
    - identifier:   "^[[:space:]]*[\\*+-] |^[[:space:]]*[0-9]+\\. "

      # misc
    - preproc:   "(\\(([CcRr]|[Tt][Mm])\\)|\\.{3}|(^|[[:space:]])\\-\\-($|[[:space:]]))"

      # links
    - constant: "\\[[^]]+\\]"
    - constant: "\\[([^][]|\\[[^]]*\\])*\\]\\([^)]+\\)"

      # images
    - underlined: "!\\[[^][]*\\](\\([^)]+\\)|\\[[^]]+\\])"

      # urls
    - underlined: "https?://[^ )>]+"

    - special: "^```$"

    - default:
        start: "```python"
        end: "```"
        rules:
          - include: "python2"

    - default: 
        start: "```go"
        end: "```"
        rules:
          - include: "go"

    - default: 
        start: "```lua"
        end: "```"
        rules:
          - include: "lua"

    - default: 
        start: "```julia"
        end: "```"
        rules:
          - include: "julia"

    - default: 
        start: "```r"
        end: "```"
        rules:
          - include: "r"                    

    - special: "^```{$"

    - default:
        start: "```{python}"
        end: "```"
        rules:
          - include: "python2"

    - default: 
        start: "```{julia}"
        end: "```"
        rules:
          - include: "julia"

    - default: 
        start: "```{r}"
        end: "```"
        rules:
          - include: "r"          
